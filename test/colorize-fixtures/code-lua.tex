
\begin{luadraw}{name=champ}
    local g = graph:new{window={-5,5,-5,5},bg="Cyan!30",size={10,10}} 
    local f = function(x,y) -- éq. diff. y'= 1-x*y^2=f(x,y)
    return 1-x*y^2
    end
    local A = Z(-1,1) -- A = -1+i
    local deltaX, deltaY, long = 0.5, 0.5, 0.4 
    local champ = function(f)
    local vecteurs, v = {}
    for y = g:Yinf(), g:Ysup(), deltaY do
    for x = g:Xinf(), g:Xsup(), deltaX do
    v = Z(1,f(x,y)) -- coordonnées 1 et f(x,y)
    v = v/cpx.abs(v)*long -- normalisation de v 
    table.insert(vecteurs, {Z(x,y), Z(x,y)+v} ) 
    end
    end
    return vecteurs -- vecteurs est une ligne polygonale
    end
    g:Daxes( {0,1,1}, {labelpos={"none","none"}, arrows="->"} )
    g:Dpolyline( champ(f), "->,blue")
    g:Dodesolve(f, A.re, A.im, {t={-2.75,5},draw_options="red,line width=0.8pt"}) 
    g:Dlabeldot("$A$", A, {pos="S"})
    g:Show()
\end{luadraw}
